<style>
/* Import cute fonts to match main project */
@import url('https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,300;0,400;0,600;0,700;0,800;1,400&family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,400&display=swap');

/* Node page-specific styles */
.card-hover-effects {
  position: relative;
  overflow: hidden;
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.card-hover-effects::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  transition: left 0.6s ease;
}

.card-hover-effects:hover::before {
  left: 100%;
}

.card-hover-effects:hover {
  transform: translateY(-8px) rotateX(3deg) rotateY(3deg);
  box-shadow: 
    0 15px 35px rgba(0,0,0,0.4),
    0 0 25px rgba(139, 92, 246, 0.2);
}

/* Cute font applications to match main project */
.cute-title {
  font-family: 'Comic Neue', cursive;
  font-weight: 700;
}

.cute-text {
  font-family: 'Nunito', sans-serif;
  font-weight: 400;
}

.cute-heading {
  font-family: 'Nunito', sans-serif;
  font-weight: 700;
}

.cute-subheading {
  font-family: 'Nunito', sans-serif;
  font-weight: 600;
}

/* Enhanced city cards with matching theme - made thinner */
.city-card {
  background: linear-gradient(135deg, 
    rgba(55, 65, 81, 0.95) 0%, 
    rgba(75, 85, 99, 0.95) 50%, 
    rgba(55, 65, 81, 0.95) 100%);
  border: 2px solid rgba(139, 92, 246, 0.3);
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  padding: 16px;
  margin: 16px 0;
}

.city-card:hover {
  border: 2px solid rgba(139, 92, 246, 0.6);
  box-shadow: 
    0 12px 40px rgba(0, 0, 0, 0.4),
    0 0 20px rgba(139, 92, 246, 0.3);
}

/* Dropdown styling - simplified */
.pitstop-dropdown {
  background: linear-gradient(135deg, rgba(75, 85, 99, 0.8), rgba(55, 65, 81, 0.8));
  border: 2px solid rgba(139, 92, 246, 0.4);
  backdrop-filter: blur(10px);
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  overflow: hidden;
  transition: all 0.3s ease;
  margin: 0 16px 16px 16px;
}

.dropdown-button {
  width: 100%;
  padding: 16px 20px;
  background: transparent;
  border: none;
  color: white;
  font-family: 'Nunito', sans-serif;
  font-weight: 600;
  font-size: 16px;
  text-align: left;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: all 0.3s ease;
}

.dropdown-button:hover {
  background: rgba(139, 92, 246, 0.2);
}

.dropdown-arrow {
  transition: transform 0.3s ease;
  font-size: 12px;
}

.dropdown-content {
  display: none;
  background: rgba(31, 41, 55, 0.8);
  border-top: 1px solid rgba(139, 92, 246, 0.2);
}

.dropdown-content.show {
  display: block;
}

.pitstop-item {
  padding: 12px 20px;
  border-bottom: 1px solid rgba(139, 92, 246, 0.1);
  transition: all 0.3s ease;
  cursor: pointer;
}

.pitstop-item:last-child {
  border-bottom: none;
}

.pitstop-item:hover {
  background: rgba(139, 92, 246, 0.15);
  transform: translateX(4px);
}

.pitstop-name {
  font-family: 'Nunito', sans-serif;
  font-weight: 600;
  color: #e5e7eb;
  font-size: 14px;
  margin-bottom: 4px;
}

.pitstop-description {
  font-family: 'Nunito', sans-serif;
  font-weight: 400;
  color: #9ca3af;
  font-size: 12px;
  line-height: 1.4;
}

/* Data tag styling to match theme */
.data-tag {
  background: linear-gradient(135deg, #8b5cf6, #3b82f6);
  border: 2px solid rgba(139, 92, 246, 0.4);
  color: white;
  font-family: 'Nunito', sans-serif;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
  transition: all 0.3s ease;
}

.data-tag:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(139, 92, 246, 0.6);
  border: 2px solid rgba(139, 92, 246, 0.8);
}

/* Prerequisite button styling */
.prereq-button {
  background: linear-gradient(135deg, #8b5cf6, #3b82f6);
  border: 2px solid rgba(139, 92, 246, 0.4);
  padding: 12px 24px;
  border-radius: 25px;
  color: white;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-size: 12px;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
  position: relative;
  overflow: hidden;
  font-family: 'Nunito', sans-serif;
}

.prereq-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(139, 92, 246, 0.6);
  border: 2px solid rgba(139, 92, 246, 0.8);
}

.prereq-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s ease;
}

.prereq-button:hover::before {
  left: 100%;
}

@media (max-width: 768px) {
  .city-card {
    padding: 12px;
    margin: 12px 0;
  }
  
  .dropdown-button {
    padding: 12px 16px;
    font-size: 14px;
  }
  
  .pitstop-item {
    padding: 8px 16px;
  }
}
</style>

<div class="min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-blue-900">
  <div class="container mx-auto px-8 py-16">

    {% if page.lxdData.Prequisites %}
    <div class="mb-16 text-center">
      <h3 class="text-2xl font-bold text-white mb-8 cute-heading">üéØ Prerequisites</h3>
      <ul class="flex flex-wrap gap-8 justify-center">
        {% for prereq in page.lxdData.Prequisites %}
          <li>
            <a href="{{ site.baseurl}}{{ prereq.link }}" class="prereq-button cute-text">
              {{ prereq.title }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

    <div class="relative z-10">
      
      <!-- Node Title & Description -->
      <div class="text-center mb-20">
        <div class="inline-block relative mb-10">
          <h2 class="text-5xl md:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 cute-title">
            {{ page.lxdData.Title }}
          </h2>
          <div class="absolute -inset-2 bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 opacity-20 blur-xl rounded-lg"></div>
        </div>
        {% if page.lxdData.Description %}
        <p class="text-xl text-gray-300 max-w-4xl mx-auto leading-relaxed cute-text px-6">
          {{ page.lxdData.Description }}
        </p>
        {% endif %}
      </div>

      <!-- Debug info -->
      <div class="text-center mb-8 text-yellow-400 cute-text">
        <p>Debug: Cities found: {% if page.lxdData.Cities %}{{ page.lxdData.Cities.size }}{% else %}0{% endif %}</p>
      </div>

      <!-- Road Trip / City Cards -->
      <div class="grid grid-cols-1 gap-12 mb-16 max-w-6xl mx-auto">
        {% if page.lxdData.Cities %}
          {% for city in page.lxdData.Cities %}
            <div class="city-card rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden group card-hover-effects">

              <!-- City Title -->
              <div class="w-full px-4 pt-4 pb-2">
                <h3 class="text-3xl xl:text-4xl font-bold text-white cute-heading">
                  üèôÔ∏è {{ city.Name }}
                </h3>
              </div>

              <!-- Pitstops Dropdown -->
              <div class="pitstop-dropdown">
                <button class="dropdown-button" type="button" data-index="{{ forloop.index0 }}">
                  <span class="cute-text">üó∫Ô∏è Explore Pitstops ({% if city.Pitstops %}{{ city.Pitstops.size }}{% else %}0{% endif %})</span>
                  <span class="dropdown-arrow" id="arrow-{{ forloop.index0 }}">‚ñº</span>
                </button>
                <div class="dropdown-content" id="dropdown-{{ forloop.index0 }}">
                  {% if city.Pitstops and city.Pitstops.size > 0 %}
                    {% for pitstop in city.Pitstops %}
                      <div class="pitstop-item">
                        <div class="pitstop-name">üìç {{ pitstop.Name }}</div>
                        <div class="pitstop-description">{{ pitstop.Description }}</div>
                      </div>
                    {% endfor %}
                  {% else %}
                    <div class="pitstop-item">
                      <div class="pitstop-name">üöß No pitstops available</div>
                      <div class="pitstop-description">Add pitstops to your markdown file to see them here</div>
                    </div>
                  {% endif %}
                </div>
              </div>

              <!-- Description -->
              <div class="w-full px-4 pb-4 pt-2">
                {% if city.Description %}
                <p class="text-gray-300 text-lg leading-relaxed cute-text mb-4">{{ city.Description }}</p>
                {% endif %}
                {% if city.Challenge %}
                <div class="text-sm text-purple-400 cute-text mb-2">
                  üéØ Challenge: {{ city.Challenge }}
                </div>
                {% endif %}
                {% if city.Analogy %}
                <div class="text-sm text-blue-400 cute-text">
                  üí° Analogy: {{ city.Analogy }}
                </div>
                {% endif %}
              </div>

            </div>
          {% endfor %}
        {% else %}
          <div class="text-center text-red-400">
            <p>No cities data found. Check your markdown file structure.</p>
          </div>
        {% endif %}
      </div>

      <!-- Back to Hub Button -->
      <div class="text-center mt-20">
        <a href="{{ site.baseurl }}/project" class="prereq-button cute-text inline-block">
          üè† Back to Travel Hub
        </a>
      </div>

    </div>
  </div>
</div>

<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
  // Add event listeners to dropdown buttons
  var buttons = document.querySelectorAll('.dropdown-button');
  
  for (var i = 0; i < buttons.length; i++) {
    buttons[i].addEventListener('click', function() {
      var index = this.getAttribute('data-index');
      var dropdown = document.getElementById('dropdown-' + index);
      var arrow = document.getElementById('arrow-' + index);
      
      if (!dropdown) return;
      
      var isVisible = dropdown.classList.contains('show');
      
      // Close all dropdowns
      var allDropdowns = document.querySelectorAll('.dropdown-content');
      var allArrows = document.querySelectorAll('.dropdown-arrow');
      
      for (var j = 0; j < allDropdowns.length; j++) {
        allDropdowns[j].classList.remove('show');
      }
      
      for (var k = 0; k < allArrows.length; k++) {
        allArrows[k].style.transform = 'rotate(0deg)';
      }
      
      // Toggle current dropdown
      if (!isVisible) {
        dropdown.classList.add('show');
        if (arrow) arrow.style.transform = 'rotate(180deg)';
      }
    });
  }
});
</script>
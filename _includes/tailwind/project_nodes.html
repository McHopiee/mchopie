<style>
/* Import cute fonts to match main project */
@import url('https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,300;0,400;0,600;0,700;0,800;1,400&family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,400&display=swap');

/* Cute font applications to match main project */
.cute-title {
  font-family: 'Comic Neue', cursive;
  font-weight: 700;
}

.cute-text {
  font-family: 'Nunito', sans-serif;
  font-weight: 400;
}

.cute-heading {
  font-family: 'Nunito', sans-serif;
  font-weight: 700;
}

.cute-subheading {
  font-family: 'Nunito', sans-serif;
  font-weight: 600;
}

/* City cards - clean sections */
.city-card {
  background: linear-gradient(135deg, 
    rgba(55, 65, 81, 0.95) 0%, 
    rgba(75, 85, 99, 0.95) 50%, 
    rgba(55, 65, 81, 0.95) 100%);
  border: 2px solid rgba(139, 92, 246, 0.3);
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  padding: 24px;
  margin: 16px 0;
  overflow: visible;
  transition: all 0.3s ease;
}

/* Travel route connector */
.travel-route {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 32px 0;
  position: relative;
}

.route-line {
  width: 4px;
  height: 60px;
  background: linear-gradient(to bottom, 
    rgba(139, 92, 246, 0.8) 0%,
    rgba(59, 130, 246, 0.8) 50%,
    rgba(139, 92, 246, 0.8) 100%);
  border-radius: 2px;
  position: relative;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 1; }
}

/* ENHANCED: Clickable route button */
.route-button {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 24px;
  background: rgba(31, 41, 55, 0.95);
  padding: 12px;
  border-radius: 50%;
  border: 2px solid rgba(139, 92, 246, 0.5);
  cursor: pointer;
  transition: all 0.3s ease;
  z-index: 10;
}

.route-button:hover {
  background: rgba(139, 92, 246, 0.2);
  border-color: rgba(139, 92, 246, 0.8);
  transform: translate(-50%, -50%) scale(1.1);
  box-shadow: 0 4px 16px rgba(139, 92, 246, 0.3);
}

.route-button.active {
  background: rgba(139, 92, 246, 0.3);
  border-color: rgba(139, 92, 246, 1);
}

/* ENHANCED: Pitstops container with dropdown functionality */
.pitstops-section {
  background: linear-gradient(135deg, 
    rgba(31, 41, 55, 0.95) 0%, 
    rgba(55, 65, 81, 0.95) 100%);
  border: 2px solid rgba(59, 130, 246, 0.4);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  padding: 20px;
  margin: 16px 0;
  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.2);
  display: none; /* HIDDEN by default */
  opacity: 0;
  transform: translateY(-20px);
  transition: all 0.4s ease;
}

.pitstops-section.show {
  display: block;
  animation: slideDown 0.4s ease-out forwards;
}

@keyframes slideDown {
  0% {
    opacity: 0;
    transform: translateY(-20px) scaleY(0.8);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scaleY(1);
  }
}

.pitstops-title {
  text-align: center;
  color: #60a5fa;
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.pitstops-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 16px;
}

/* ENHANCED: Pitstop items with activity sections */
.pitstop-item {
  background: rgba(59, 130, 246, 0.15);
  border: 1px solid rgba(59, 130, 246, 0.3);
  border-radius: 12px;
  padding: 20px;
  transition: all 0.3s ease;
  cursor: default;
}

.pitstop-item:hover {
  background: rgba(59, 130, 246, 0.25);
  border-color: rgba(59, 130, 246, 0.5);
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(59, 130, 246, 0.2);
}

.pitstop-name {
  font-family: 'Nunito', sans-serif;
  font-weight: 700;
  color: #93c5fd;
  font-size: 16px;
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.pitstop-description {
  font-family: 'Nunito', sans-serif;
  font-weight: 400;
  color: #d1d5db;
  font-size: 14px;
  line-height: 1.5;
  margin-bottom: 16px;
}

/* NEW: Activity sections */
.pitstop-activity {
  background: rgba(139, 92, 246, 0.1);
  border: 1px solid rgba(139, 92, 246, 0.3);
  border-radius: 8px;
  padding: 16px;
  margin-top: 12px;
}

.activity-title {
  font-family: 'Nunito', sans-serif;
  font-weight: 600;
  color: #c084fc;
  font-size: 14px;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.activity-content {
  display: none;
  margin-top: 12px;
}

.activity-content.show {
  display: block;
  animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

.activity-prompt {
  background: rgba(31, 41, 55, 0.7);
  border-left: 4px solid #8b5cf6;
  padding: 12px 16px;
  margin: 8px 0;
  border-radius: 0 8px 8px 0;
  font-size: 13px;
  color: #e5e7eb;
  line-height: 1.4;
}

.activity-input {
  width: 100%;
  background: rgba(31, 41, 55, 0.8);
  border: 1px solid rgba(139, 92, 246, 0.4);
  border-radius: 6px;
  padding: 10px 12px;
  color: #e5e7eb;
  font-size: 13px;
  font-family: 'Nunito', sans-serif;
  margin: 8px 0;
  transition: border-color 0.3s ease;
}

.activity-input:focus {
  outline: none;
  border-color: rgba(139, 92, 246, 0.8);
  box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
}

.activity-button {
  background: linear-gradient(135deg, #8b5cf6, #3b82f6);
  border: none;
  color: white;
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  margin: 8px 4px 4px 0;
}

.activity-button:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4);
}

.activity-toggle {
  background: transparent;
  border: 1px solid rgba(139, 92, 246, 0.4);
  color: #c084fc;
  padding: 6px 12px;
  border-radius: 15px;
  font-size: 11px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  margin-left: auto;
}

.activity-toggle:hover {
  background: rgba(139, 92, 246, 0.2);
  border-color: rgba(139, 92, 246, 0.6);
}

/* Data tag styling to match theme */
.data-tag {
  background: linear-gradient(135deg, #8b5cf6, #3b82f6);
  border: 2px solid rgba(139, 92, 246, 0.4);
  color: white;
  font-family: 'Nunito', sans-serif;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
  transition: all 0.3s ease;
}

.data-tag:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(139, 92, 246, 0.6);
  border: 2px solid rgba(139, 92, 246, 0.8);
}

/* Prerequisite button styling */
.prereq-button {
  background: linear-gradient(135deg, #8b5cf6, #3b82f6);
  border: 2px solid rgba(139, 92, 246, 0.4);
  padding: 12px 24px;
  border-radius: 25px;
  color: white;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-size: 12px;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
  position: relative;
  overflow: hidden;
  font-family: 'Nunito', sans-serif;
}

.prereq-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(139, 92, 246, 0.6);
  border: 2px solid rgba(139, 92, 246, 0.8);
}

.prereq-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s ease;
}

.prereq-button:hover::before {
  left: 100%;
}

@media (max-width: 768px) {
  .city-card {
    padding: 16px;
    margin: 12px 0;
  }
  
  .pitstops-grid {
    grid-template-columns: 1fr;
    gap: 12px;
  }
  
  .pitstop-item {
    padding: 16px;
  }
  
  .route-line {
    height: 40px;
  }
  
  .route-button {
    font-size: 18px;
    padding: 8px;
  }
}
</style>

<div class="min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-blue-900">
  <div class="container mx-auto px-8 py-16">

    {% if page.lxdData.Prequisites %}
    <div class="mb-16 text-center">
      <h3 class="text-2xl font-bold text-white mb-8 cute-heading">üéØ Prerequisites</h3>
      <ul class="flex flex-wrap gap-8 justify-center">
        {% for prereq in page.lxdData.Prequisites %}
          <li>
            <a href="{{ site.baseurl}}{{ prereq.link }}" class="prereq-button cute-text">
              {{ prereq.title }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

    <div class="relative z-10">
      
      <!-- Node Title & Description -->
      <div class="text-center mb-20">
        <div class="inline-block relative mb-10">
          <h2 class="text-5xl md:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 cute-title">
            {{ page.lxdData.Title }}
          </h2>
          <div class="absolute -inset-2 bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 opacity-20 blur-xl rounded-lg"></div>
        </div>
        {% if page.lxdData.Description %}
        <p class="text-xl text-gray-300 max-w-4xl mx-auto leading-relaxed cute-text px-6">
          {{ page.lxdData.Description }}
        </p>
        {% endif %}
      </div>

      <!-- Debug info -->
      <div class="text-center mb-8 text-yellow-400 cute-text">
        <p>Debug: Cities found: {% if page.lxdData.Cities %}{{ page.lxdData.Cities.size }}{% else %}0{% endif %}</p>
      </div>

      <!-- Travel Route with Cities and Pitstops -->
      <div class="max-w-5xl mx-auto">
        {% if page.lxdData.Cities %}
          {% for city in page.lxdData.Cities %}
            
            <!-- City Card -->
            <div class="city-card rounded-2xl shadow-lg">
              <!-- City Title -->
              <div class="w-full mb-4">
                <h3 class="text-3xl xl:text-4xl font-bold text-white cute-heading">
                  üèôÔ∏è {{ city.Name }}
                </h3>
              </div>

              <!-- City Description -->
              <div class="w-full">
                {% if city.Description %}
                <p class="text-gray-300 text-lg leading-relaxed cute-text mb-4">{{ city.Description }}</p>
                {% endif %}
                {% if city.Challenge %}
                <div class="text-sm text-purple-400 cute-text mb-2">
                  üéØ <strong>Challenge:</strong> {{ city.Challenge }}
                </div>
                {% endif %}
                {% if city.Analogy %}
                <div class="text-sm text-blue-400 cute-text">
                  üí° <strong>Analogy:</strong> {{ city.Analogy }}
                </div>
                {% endif %}
              </div>
            </div>

            <!-- Travel Route & Pitstops (only if not the last city) -->
            {% unless forloop.last %}
              <div class="travel-route">
                <div class="route-line">
                  <!-- ENHANCED: Clickable route button -->
                  <button class="route-button" data-route="{{ forloop.index0 }}" title="Click to explore pitstops">
                    üõ£Ô∏è
                  </button>
                </div>
              </div>

              <!-- ENHANCED: Hidden pitstops section with activities -->
              {% if city.Pitstops and city.Pitstops.size > 0 %}
              <div class="pitstops-section" id="pitstops-{{ forloop.index0 }}">
                <div class="pitstops-title cute-subheading">
                  üó∫Ô∏è Travel Pitstops: {{ city.Name }} ‚Üí 
                  {% assign next_index = forloop.index %}
                  {% for next_city in page.lxdData.Cities %}
                    {% if forloop.index == next_index %}
                      {{ next_city.Name }}
                      {% break %}
                    {% endif %}
                  {% endfor %}
                </div>
                
                <div class="pitstops-grid">
                  {% for pitstop in city.Pitstops %}
                    <div class="pitstop-item">
                      <div class="pitstop-name">
                        üìç {{ pitstop.Name }}
                      </div>
                      <div class="pitstop-description">
                        {{ pitstop.Description }}
                      </div>
                      
                      <!-- DYNAMIC ACTIVITY SECTION -->
                      <div class="pitstop-activity">
                        <div class="activity-title">
                          üéØ JavaScript Challenge
                          <button class="activity-toggle" onclick="toggleActivity('{{ forloop.parentloop.index0 }}-{{ forloop.index0 }}')">
                            Try It
                          </button>
                        </div>
                        
                        <div class="activity-content" id="activity-{{ forloop.parentloop.index0 }}-{{ forloop.index0 }}">
                          <div class="activity-prompt" id="prompt-{{ forloop.parentloop.index0 }}-{{ forloop.index0 }}"
                               data-original-activity="{{ pitstop.Activity | escape }}"
                               data-hints="{{ pitstop.Hints | join: '||' | escape }}">
                            <!-- Dynamic prompt will be generated by JavaScript -->
                          </div>
                          
                          <textarea 
                            class="activity-input" 
                            id="input-{{ forloop.parentloop.index0 }}-{{ forloop.index0 }}"
                            placeholder="Type your JavaScript solution here..."
                            rows="4">
                          </textarea>
                          
                          <div>
                            <button class="activity-button" onclick="checkActivity('{{ forloop.parentloop.index0 }}-{{ forloop.index0 }}')">
                              Submit
                            </button>
                            <button class="activity-button" onclick="hintActivity('{{ forloop.parentloop.index0 }}-{{ forloop.index0 }}')">
                              Hint
                            </button>
                            <button class="activity-button" onclick="resetActivity('{{ forloop.parentloop.index0 }}-{{ forloop.index0 }}')">
                              Reset
                            </button>
                          </div>
                          
                          <div class="activity-prompt" id="feedback-{{ forloop.parentloop.index0 }}-{{ forloop.index0 }}" style="display: none;">
                            <!-- Dynamic feedback will appear here -->
                          </div>
                        </div>
                      </div>
                    </div>
                  {% endfor %}
                </div>
              </div>
              {% endif %}
            {% endunless %}

          {% endfor %}
        {% else %}
          <div class="text-center text-red-400">
            <p>No cities data found. Check your markdown file structure.</p>
          </div>
        {% endif %}
      </div>

      <!-- Back to Hub Button -->
      <div class="text-center mt-20">
        <a href="{{ site.baseurl }}/project" class="prereq-button cute-text inline-block">
          üè† Back to Travel Hub
        </a>
      </div>

    </div>
  </div>
</div>

<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
  console.log('=== ROUTE DROPDOWN SETUP ===');
  
  var routeButtons = document.querySelectorAll('.route-button');
  console.log('Found ' + routeButtons.length + ' route buttons');
  
  for (var i = 0; i < routeButtons.length; i++) {
    routeButtons[i].addEventListener('click', function(e) {
      console.log('Route button clicked!');
      
      var routeIndex = this.getAttribute('data-route');
      var pitstopsSection = document.getElementById('pitstops-' + routeIndex);
      
      console.log('Toggling pitstops-' + routeIndex);
      
      if (!pitstopsSection) {
        console.log('Pitstops section not found!');
        return;
      }
      
      var isVisible = pitstopsSection.classList.contains('show');
      console.log('Currently visible:', isVisible);
      
      // Close all other pitstops sections and reset buttons
      var allPitstops = document.querySelectorAll('.pitstops-section');
      var allButtons = document.querySelectorAll('.route-button');
      
      for (var j = 0; j < allPitstops.length; j++) {
        allPitstops[j].classList.remove('show');
      }
      
      for (var k = 0; k < allButtons.length; k++) {
        allButtons[k].classList.remove('active');
      }
      
      // Toggle current pitstops section
      if (!isVisible) {
        pitstopsSection.classList.add('show');
        this.classList.add('active');
        console.log('OPENED pitstops ' + routeIndex);
        
        // Smooth scroll to the pitstops section
        setTimeout(function() {
          pitstopsSection.scrollIntoView({ 
            behavior: 'smooth', 
            block: 'center' 
          });
        }, 200);
      } else {
        console.log('CLOSED pitstops ' + routeIndex);
      }
    });
  }
  
  // Initialize JavaScript activities
  initializeJavaScriptActivities();
});

function initializeJavaScriptActivities() {
  console.log('Initializing JavaScript activities...');
  
  var activityPrompts = document.querySelectorAll('[data-original-activity]');
  
  for (var i = 0; i < activityPrompts.length; i++) {
    var prompt = activityPrompts[i];
    var originalActivity = prompt.getAttribute('data-original-activity');
    var jsActivity = convertToJavaScript(originalActivity);
    prompt.textContent = jsActivity;
    console.log('Converted activity:', jsActivity);
  }
}

function convertToJavaScript(originalActivity) {
  if (!originalActivity) {
    return 'Write JavaScript code to practice programming concepts.';
  }
  
  var activity = originalActivity.toLowerCase();
  
  // Database table creation -> JavaScript object/class
  if (activity.includes('create') && activity.includes('table')) {
    if (activity.includes('taco')) {
      return 'Create a JavaScript class called FishTaco with properties: id, fishType, toppings (array), sauce, price, spiceLevel. Add a method to calculate total price with tax.';
    }
    if (activity.includes('burrito')) {
      return 'Design a JavaScript object structure for a burrito customization system. Create classes: Burrito, Ingredient. Add methods to addIngredient(), removeIngredient(), and calculatePrice().';
    }
    if (activity.includes('sauce')) {
      return 'Create a JavaScript Map to store sauce data with heat levels. Write functions: getSauceByName(), addNewSauce(), and filterSaucesByHeat(level).';
    }
  }
  
  // INSERT operations -> Object creation and validation
  if (activity.includes('insert')) {
    if (activity.includes('ceviche')) {
      return 'Write a JavaScript function validateCeviche(recipe) that checks: fish is "fresh", citrusTime is between 10-60 minutes, temperature is "cold". Return validation results.';
    }
    if (activity.includes('bbq') || activity.includes('transaction')) {
      return 'Create an async function orderBBQCombo() that simulates ordering multiple items. Use Promise.all() to handle multiple async operations and proper error handling.';
    }
  }
  
  // API design -> Fetch and REST
  if (activity.includes('api') || activity.includes('endpoint')) {
    if (activity.includes('taco')) {
      return 'Write a JavaScript function getTacos(filling, spice) that builds a query URL and uses fetch() to get taco data. Include error handling and response parsing.';
    }
    if (activity.includes('food truck')) {
      return 'Design JavaScript functions for a food truck API: getMenu(), createOrder(items), getOrderStatus(id). Use async/await and include proper error handling.';
    }
  }
  
  // Validation and security -> Input sanitization
  if (activity.includes('validation') || activity.includes('sanitiz')) {
    return 'Create a JavaScript function sanitizeUserInput(data) that validates and cleans user inputs. Handle special characters, length limits, and prevent XSS attacks.';
  }
  
  // Pagination -> Array methods and pagination logic
  if (activity.includes('pagination') || activity.includes('limit')) {
    return 'Write JavaScript pagination functions: getPage(data, pageNum, itemsPerPage), calculateTotalPages(totalItems, itemsPerPage). Include navigation logic.';
  }
  
  // Indexing/optimization -> Caching and performance
  if (activity.includes('index') || activity.includes('optimization')) {
    return 'Implement a JavaScript caching system using Map. Create functions: setCache(key, value, ttl), getCache(key), clearExpired(). Add performance timing with console.time().';
  }
  
  // JOIN operations -> Object merging and data combination
  if (activity.includes('join')) {
    return 'Write JavaScript functions to combine data from multiple arrays (dishes, ingredients, suppliers). Use array methods like map(), filter(), and reduce() to merge related data.';
  }
  
  // Backup/migration -> LocalStorage and data management
  if (activity.includes('backup') || activity.includes('migration')) {
    return 'Create JavaScript functions for data backup: saveToLocalStorage(data), restoreFromBackup(timestamp), listAvailableBackups(). Handle storage quota and data validation.';
  }
  
  // Monitoring/logging -> Performance tracking
  if (activity.includes('logging') || activity.includes('monitoring')) {
    return 'Build a JavaScript performance monitoring system. Track function execution times, API call durations, and user interactions. Store metrics and display simple analytics.';
  }
  
  // Generic conversion
  return 'JavaScript Challenge: ' + originalActivity.replace(/SQL|CREATE TABLE|INSERT|SELECT|UPDATE|DELETE/gi, function(match) {
    var replacements = {
      'SQL': 'JavaScript',
      'CREATE TABLE': 'Create a JavaScript class',
      'INSERT': 'Add data using JavaScript',
      'SELECT': 'Filter data using JavaScript',
      'UPDATE': 'Modify data using JavaScript',
      'DELETE': 'Remove data using JavaScript'
    };
    return replacements[match.toUpperCase()] || match;
  });
}

function toggleActivity(activityId) {
  var content = document.getElementById('activity-' + activityId);
  var toggle = event.target;
  
  if (!content) {
    console.error('Activity content not found for:', activityId);
    return;
  }
  
  if (content.classList.contains('show')) {
    content.classList.remove('show');
    toggle.textContent = 'Try It';
  } else {
    content.classList.add('show');
    toggle.textContent = 'Hide';
  }
}

function checkActivity(activityId) {
  var input = document.getElementById('input-' + activityId);
  var feedback = document.getElementById('feedback-' + activityId);
  
  if (!input || !feedback) {
    console.error('Input or feedback element not found for:', activityId);
    return;
  }
  
  var userInput = input.value.trim();
  
  if (userInput.length < 15) {
    showFeedback(feedback, "Try to provide a more detailed JavaScript solution! Add more code and explanation.", "warning");
    return;
  }
  
  // Check for JavaScript-specific terms
  var jsTerms = ['function', 'const', 'let', 'var', 'class', 'async', 'await', 'fetch', 'map', 'filter', 'reduce', '=>', 'return'];
  var hasJSTerms = jsTerms.some(function(term) {
    return userInput.toLowerCase().includes(term);
  });
  
  if (hasJSTerms) {
    var hasGoodPractices = userInput.includes('//') || userInput.includes('const') || userInput.includes('let') || userInput.includes('try');
    
    if (hasGoodPractices) {
      showFeedback(feedback, "Excellent JavaScript! Great use of modern syntax and best practices! üöÄ", "success");
    } else {
      showFeedback(feedback, "Good JavaScript! Try adding comments and using const/let for better practices. ‚ú®", "info");
    }
  } else {
    showFeedback(feedback, "Good start! Try including JavaScript syntax like functions, variables (const/let), or array methods. üìù", "info");
  }
}

// ENHANCED: Pull hints from markdown data
function hintActivity(activityId) {
  var feedback = document.getElementById('feedback-' + activityId);
  var prompt = document.getElementById('prompt-' + activityId);
  
  if (!feedback || !prompt) {
    console.error('Feedback or prompt element not found for:', activityId);
    return;
  }
  
  // Get hints from markdown data
  var hintsData = prompt.getAttribute('data-hints');
  var hints = [];
  
  if (hintsData && hintsData.trim()) {
    // Split hints by the delimiter we used in the template
    hints = hintsData.split('||').filter(function(hint) {
      return hint.trim().length > 0;
    });
  }
  
  // If no hints in markdown, use default JavaScript hints
  if (hints.length === 0) {
    hints = [
      "üí° Start with 'function functionName()' or 'const functionName = () =>' for arrow functions.",
      "üí° Use 'const' for values that don't change and 'let' for variables that do change.",
      "üí° Try array methods like .map(), .filter(), .find() for working with data collections.",
      "üí° Add error handling with try/catch blocks for robust code.",
      "üí° Use console.log() to test your functions and see the output.",
      "üí° Remember to return values from your functions using the 'return' keyword.",
      "üí° Use template literals with backticks for string interpolation: `Hello ${name}`",
      "üí° Consider using async/await for handling promises and API calls."
    ];
  }
  
  var randomHint = hints[Math.floor(Math.random() * hints.length)];
  showFeedback(feedback, "üí° " + randomHint, "hint");
}

function resetActivity(activityId) {
  var input = document.getElementById('input-' + activityId);
  var feedback = document.getElementById('feedback-' + activityId);
  
  if (input) input.value = '';
  if (feedback) feedback.style.display = 'none';
}

function showFeedback(feedbackElement, message, type) {
  if (!feedbackElement) {
    console.error('Feedback element not provided');
    return;
  }
  
  var colors = {
    success: 'border-green-500',
    warning: 'border-yellow-500', 
    info: 'border-blue-500',
    hint: 'border-purple-500'
  };
  
  feedbackElement.className = 'activity-prompt ' + (colors[type] || 'border-gray-500');
  feedbackElement.style.borderLeftColor = type === 'success' ? '#10b981' : 
                                         type === 'warning' ? '#f59e0b' :
                                         type === 'hint' ? '#8b5cf6' : '#3b82f6';
  feedbackElement.textContent = message;
  feedbackElement.style.display = 'block';
}
</script>
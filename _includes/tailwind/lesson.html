<div>
  <style>
    /* Scoped alignment fixes */
    .topic-grid { display: grid; gap: 1rem; align-items: start; }
    .topic-col { 
      align-self: start; 
      overflow-wrap: break-word;
      word-break: break-word;
      white-space: normal;
    }

    /* Layout variants */
    .layout-image-desc-points { grid-template-columns: 160px 1fr 1fr; }
    .layout-image-desc         { grid-template-columns: 160px 1fr; }
    .layout-desc-points        { grid-template-columns: 1fr 1fr; }
    .layout-desc-only          { grid-template-columns: 1fr; }

    /* Image sizing */
    .topic-image { text-align: center; }
    .topic-image img {
      width: 100%;
      max-width: 160px;
      height: 120px;
      object-fit: cover;
      border-radius: 0.5rem;
      display: inline-block;
    }

    /* Reset margins */
    .topic-col > h1,
    .topic-col > h2,
    .topic-col > h3,
    .topic-col > h4,
    .topic-col > h5,
    .topic-col > h6,
    .topic-col > p,
    .topic-col > ul,
    .topic-col > ol { 
      margin-top: 0 !important; 
    }

    .topic-points ul { 
      margin-top: 0 !important; 
      margin-left: 1rem;
      padding-left: 0;
      overflow-wrap: anywhere;
    }

    .topic-col p,
    .topic-col ul,
    .topic-col ol {
      margin-bottom: 0.5rem;
      max-width: 100%;
    }

    /* Card container keeps your background color */
    .topic-card {
      overflow: hidden;
      display: flex;
      flex-direction: column;
      padding: 1.5rem;
      border-radius: 0.5rem;
      background: rgba(255, 255, 255, 0.036);
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0);
    }

    .topic-code pre {
      background: #0b0b0b6d;
      color: #bac5f5cb;
      padding: 1rem;
      border-radius: 0.5rem;
      overflow-x: auto;
      margin-top: 0.75rem;
      font-size: 0.92rem;
    }

    /* --- NEW BUTTON STYLES --- */
    .button-bar {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin: 1.5rem 0;
      flex-wrap: wrap;
    }

    .pretty-btn {
      display: inline-block;
      text-decoration: none;
      padding: 0.6rem 1.2rem;
      font-size: 1rem;
      font-weight: 600;
      border-radius: 9999px;  /* pill shape */
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .pretty-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 14px rgba(0,0,0,0.3);
    }

    .pretty-btn:active {
      transform: translateY(1px);
      box-shadow: 0 3px 6px rgba(0,0,0,0.2);
    }

    /* --- DARK HEADER STYLING --- */
    .header-card {
      background: #1a1a1a;        /* dark background */
      color: #f5f5f5;            /* light text */
      border-radius: 0.5rem;
      padding: 1.5rem;
    }
    .header-card h1 { color: #ffffff; }
    .header-card p { color: #d1d1d1; }
  </style>

  {% assign data = site.data[page.infoGraph] %}
  <div class="container">

    <!-- Header Section -->
    {% if data.Title or data.Description %}
      <div class="header-card">
        {% if data.Title %}
          <h1 class="text-5xl mb-4">{{ data.Title }}</h1>
        {% endif %}
        {% if data.Description %}
          <p class="text-lg mb-4">{{ data.Description }}</p>
        {% endif %}
      </div>
    {% endif %}

    <!-- ðŸ”¹ BUTTON BAR (driven by YAML Buttons:) -->
    {% if data.Buttons %}
      <div class="button-bar">
        {% for btn in data.Buttons %}
          <a href="{{ btn.link }}" class="pretty-btn" target="_blank" rel="noopener">
            {{ btn.text }}
          </a>
        {% endfor %}
      </div>
    {% endif %}

    <!-- Rows Section -->
    <div id="rows" class="grid gap-6 p-6">
      {% for topic in data.Topics %}
        {% assign has_points = false %}
        {% if topic.keyPoints and topic.keyPoints.size > 0 %}
          {% assign has_points = true %}
        {% endif %}

        {% if topic.image and has_points %}
          {% assign layout = 'layout-image-desc-points' %}
        {% elsif topic.image and has_points == false %}
          {% assign layout = 'layout-image-desc' %}
        {% elsif topic.image == nil and has_points %}
          {% assign layout = 'layout-desc-points' %}
        {% else %}
          {% assign layout = 'layout-desc-only' %}
        {% endif %}

        <div class="topic-card">
          <!-- Topic Title -->
          {% if topic.title %}
            <h3 class="text-2xl font-bold text-center mb-6">{{ topic.title }}</h3>
          {% endif %}

          <!-- Content Grid -->
          <div class="topic-grid {{ layout }}">

            <!-- Image Column -->
            {% if topic.image %}
              <div class="topic-image topic-col">
                {% if topic.link %}
                  <a href="{{ site.baseurl }}{{ topic.link }}">
                    <img src="{{ site.baseurl }}/images/{{ topic.image }}" alt="{{ topic.alt | default: '' }}">
                  </a>
                {% else %}
                  <img src="{{ site.baseurl }}/images/{{ topic.image }}" alt="{{ topic.alt | default: '' }}">
                {% endif %}
              </div>
            {% endif %}

            <!-- Subtitle + Description -->
            <div class="topic-main topic-col">
              {% if topic.subtitle %}
                <h4 class="text-lg font-semibold mb-2">{{ topic.subtitle }}</h4>
              {% endif %}
              {% if topic.description %}
                <p class="text-sm">{{ topic.description }}</p>
              {% endif %}
            </div>

            <!-- Key Points -->
            {% if has_points %}
              <div class="topic-points topic-col">
                <ul class="list-disc list-inside">
                  {% for point in topic.keyPoints %}
                    <li>{{ point }}</li>
                  {% endfor %}
                </ul>
              </div>
            {% endif %}
          </div>

          <!-- Optional Code -->
          {% if topic.code %}
            <div class="topic-code">
              <pre><code class="language-javascript">{{ topic.code }}</code></pre>
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
</div>

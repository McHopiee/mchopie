<style>
/* Import cute fonts */
@import url('https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,300;0,400;0,600;0,700;0,800;1,400&family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,400&display=swap');

/* Card-based Module Styles */
.module-progress {
  height: 6px;
  background-color: #374151;
  border-radius: 3px;
  margin-bottom: 12px;
  overflow: hidden;
}

.progress-bar {
  height: 100%;
  background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899);
  border-radius: 3px;
  transition: width 0.3s ease;
  width: 0%;
}

.progress-bar.completed { width: 100%; }
.progress-bar.partial { width: 50%; }

.module-status {
  position: absolute;
  top: 16px;
  right: 16px;
  z-index: 10;
}

.status-badge {
  padding: 8px 14px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  font-family: 'Nunito', sans-serif;
}

.status-completed { 
  background: linear-gradient(135deg, #10b981, #059669); 
  color: white; 
}
.status-current { 
  background: linear-gradient(135deg, #f59e0b, #d97706); 
  color: white; 
}
.status-locked { 
  background: linear-gradient(135deg, #6b7280, #4b5563); 
  color: white; 
}

.card-3d {
  transform-style: preserve-3d;
  perspective: 1000px;
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  padding: 12px; /* Increased padding for more spacing */
}

.card-3d:hover {
  transform: translateY(-10px) rotateX(5deg) rotateY(5deg);
  box-shadow: 
    0 20px 40px rgba(0,0,0,0.4),
    0 0 30px rgba(139, 92, 246, 0.2);
}

.card-inner {
  background: linear-gradient(135deg, 
    rgba(55, 65, 81, 0.95) 0%, 
    rgba(75, 85, 99, 0.95) 50%, 
    rgba(55, 65, 81, 0.95) 100%);
  border: 2px solid rgba(139, 92, 246, 0.3);
  backdrop-filter: blur(10px);
  position: relative;
  overflow: hidden;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  padding: 24px; /* Added internal padding */
}

.card-inner::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, 
    transparent, 
    rgba(255, 255, 255, 0.1), 
    transparent);
  transition: left 0.6s ease;
}

.card-3d:hover .card-inner::before {
  left: 100%;
}

.card-3d:hover .card-inner {
  border: 2px solid rgba(139, 92, 246, 0.6);
  box-shadow: 
    0 12px 40px rgba(0, 0, 0, 0.4),
    0 0 20px rgba(139, 92, 246, 0.3);
}

.card-icon {
  background: linear-gradient(135deg, #8b5cf6, #3b82f6);
  border-radius: 50%;
  width: 80px;
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 20px; /* Increased margin */
  box-shadow: 0 8px 20px rgba(139, 92, 246, 0.3);
  transition: transform 0.3s ease;
  border: 2px solid rgba(255, 255, 255, 0.2);
}

.card-3d:hover .card-icon {
  transform: scale(1.1) rotateZ(10deg);
  border: 2px solid rgba(255, 255, 255, 0.4);
}

.theme-button {
  background: linear-gradient(135deg, #8b5cf6, #3b82f6);
  border: 2px solid rgba(139, 92, 246, 0.4);
  padding: 14px 28px; /* Increased padding */
  border-radius: 25px;
  color: white;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-size: 12px;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
  position: relative;
  overflow: hidden;
  font-family: 'Nunito', sans-serif;
}

.theme-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(139, 92, 246, 0.6);
  border: 2px solid rgba(139, 92, 246, 0.8);
}

.theme-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s ease;
}

.theme-button:hover::before {
  left: 100%;
}

.theme-button.locked {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 2px solid rgba(107, 114, 128, 0.4);
  box-shadow: 0 4px 15px rgba(107, 114, 128, 0.4);
  cursor: not-allowed;
}

.progress-indicator {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: rgba(0,0,0,0.2);
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #10b981, #34d399);
  width: 0%;
  transition: width 0.5s ease;
  border-right: 1px solid rgba(255, 255, 255, 0.2);
}

/* Grid improvements */
.cards-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 28px; /* Increased gap */
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 24px; /* Increased padding */
}

/* Cute font applications */
.cute-title {
  font-family: 'Comic Neue', cursive;
  font-weight: 700;
}

.cute-text {
  font-family: 'Nunito', sans-serif;
  font-weight: 400;
}

.cute-heading {
  font-family: 'Nunito', sans-serif;
  font-weight: 700;
}

.cute-button-text {
  font-family: 'Nunito', sans-serif;
  font-weight: 600;
}

@media (max-width: 768px) {
  .cards-container {
    grid-template-columns: 1fr;
    gap: 20px;
    padding: 0 20px;
  }
  
  .card-3d {
    padding: 10px;
  }
  
  .card-inner {
    padding: 20px;
  }
}
</style>

<div class="min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-blue-900">
  <div class="container mx-auto px-6 py-12">
    
    <!-- Title Section -->
    <div class="text-center mb-20">
      <div class="inline-block relative">
        <h1 class="text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 mb-6 cute-title">
          üó∫Ô∏è Travel Quest Hub
        </h1>
        <div class="absolute -inset-2 bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 opacity-20 blur-xl rounded-lg"></div>
      </div>
      <p class="text-xl text-gray-300 max-w-4xl mx-auto leading-relaxed cute-text px-4">
        Four parallel journeys through San Diego ‚Üí Los Angeles ‚Üí San Francisco ‚Üí Seattle. Same cities, different perspectives! 
        Choose your learning adventure through coding concepts. üéØ
      </p>
    </div>

    <!-- Theme Cards Grid -->
    <div class="cards-container">
      
      <!-- Node One: AI Theme Card -->
      <div class="card-3d" data-node="ai">
        <div class="card-inner rounded-2xl h-full relative">
          <div class="module-status">
            <span class="status-badge status-current">Node 1</span>
          </div>
          
          <div class="text-center">
            <div class="card-icon">
              <span class="text-3xl">ü§ñ</span>
            </div>
            
            <h3 class="text-2xl font-bold text-white mb-4 cute-heading">AI Route</h3>
            <p class="text-gray-300 text-sm mb-8 leading-relaxed cute-text">
              Tech tour! San Diego ‚Üí LA ‚Üí San Francisco ‚Üí Seattle discovering <strong>AI & Machine Learning</strong> through tech hubs, startups, and innovation centers.
            </p>
            
            <div class="module-progress mb-6">
              <div class="progress-bar" style="width: 0%"></div>
            </div>
            
            <div class="flex flex-col gap-3">
              <button class="theme-button w-full cute-button-text" onclick="startTheme('ai')">
                Start Journey
              </button>
              <div class="text-xs text-gray-400 cute-text">Progress: 0/4 Cities</div>
            </div>
          </div>
          
          <div class="progress-indicator">
            <div class="progress-fill" style="width: 0%"></div>
          </div>
        </div>
      </div>

      <!-- Node Two: Sports Theme Card -->
      <div class="card-3d" data-node="sports">
        <div class="card-inner rounded-2xl h-full relative">
          <div class="module-status">
            <span class="status-badge status-current">Node 2</span>
          </div>
          
          <div class="text-center">
            <div class="card-icon">
              <span class="text-3xl">‚öΩ</span>
            </div>
            
            <h3 class="text-2xl font-bold text-white mb-4 cute-heading">Sports Route</h3>
            <p class="text-gray-300 text-sm mb-8 leading-relaxed cute-text">
              Athletic adventure! San Diego ‚Üí LA ‚Üí San Francisco ‚Üí Seattle learning <strong>APIs & Integration</strong> through local teams, stadiums, sports data, and athletic facilities.
            </p>
            
            <div class="module-progress mb-6">
              <div class="progress-bar" style="width: 0%"></div>
            </div>
            
            <div class="flex flex-col gap-3">
              <button class="theme-button w-full cute-button-text" onclick="startTheme('sports')">
                Start Journey
              </button>
              <div class="text-xs text-gray-400 cute-text">Progress: 0/4 Cities</div>
            </div>
          </div>
          
          <div class="progress-indicator">
            <div class="progress-fill" style="width: 0%"></div>
          </div>
        </div>
      </div>

      <!-- Node Three: Food Theme Card -->
      <div class="card-3d" data-node="food">
        <div class="card-inner rounded-2xl h-full relative">
          <div class="module-status">
            <span class="status-badge status-current">Node 3</span>
          </div>
          
          <div class="text-center">
            <div class="card-icon">
              <span class="text-3xl">üçï</span>
            </div>
            
            <h3 class="text-2xl font-bold text-white mb-4 cute-heading">Food Route</h3>
            <p class="text-gray-300 text-sm mb-8 leading-relaxed cute-text">
              Culinary coding! San Diego ‚Üí LA ‚Üí San Francisco ‚Üí Seattle exploring <strong>Back-End & Databases</strong> through local cuisines and restaurant systems.
            </p>
            
            <div class="module-progress mb-6">
              <div class="progress-bar" style="width: 0%"></div>
            </div>
            
            <div class="flex flex-col gap-3">
              <button class="theme-button w-full cute-button-text" onclick="startTheme('food')">
                Start Journey
              </button>
              <div class="text-xs text-gray-400 cute-text">Progress: 0/4 Cities</div>
            </div>
          </div>
          
          <div class="progress-indicator">
            <div class="progress-fill" style="width: 0%"></div>
          </div>
        </div>
      </div>

      <!-- Node Four: Travel Theme Card -->
      <div class="card-3d" data-node="travel">
        <div class="card-inner rounded-2xl h-full relative">
          <div class="module-status">
            <span class="status-badge status-current">Node 4</span>
          </div>
          
          <div class="text-center">
            <div class="card-icon">
              <span class="text-3xl">üöó</span>
            </div>
            
            <h3 class="text-2xl font-bold text-white mb-4 cute-heading">Travel Route</h3>
            <p class="text-gray-300 text-sm mb-8 leading-relaxed cute-text">
              Journey through San Diego ‚Üí LA ‚Üí San Francisco ‚Üí Seattle focusing on <strong>Front-End & UI Design</strong>. Explore navigation, layouts, and user experiences.
            </p>
            
            <div class="module-progress mb-6">
              <div class="progress-bar" style="width: 0%"></div>
            </div>
            
            <div class="flex flex-col gap-3">
              <button class="theme-button w-full cute-button-text" onclick="startTheme('travel')">
                Start Journey
              </button>
              <div class="text-xs text-gray-400 cute-text">Progress: 0/4 Cities</div>
            </div>
          </div>
          
          <div class="progress-indicator">
            <div class="progress-fill" style="width: 0%"></div>
          </div>
        </div>
      </div>

    </div>

    <!-- Quick Stats -->
    <div class="mt-20 max-w-4xl mx-auto px-6">
      <div class="bg-gray-800/50 backdrop-blur-lg rounded-2xl p-10 border-2 border-gray-600/30 shadow-2xl">
        <h3 class="text-2xl font-bold text-white mb-8 text-center cute-heading">üéØ Journey Progress</h3>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div class="text-center p-6 bg-gray-700/30 rounded-lg border border-purple-500/20">
            <div class="text-3xl font-bold text-purple-400 cute-heading" id="themes-completed">4</div>
            <div class="text-sm text-gray-400 cute-text">Routes Available</div>
          </div>
          <div class="text-center p-6 bg-gray-700/30 rounded-lg border border-blue-500/20">
            <div class="text-3xl font-bold text-blue-400 cute-heading" id="cities-visited">0</div>
            <div class="text-sm text-gray-400 cute-text">Cities Explored</div>
          </div>
          <div class="text-center p-6 bg-gray-700/30 rounded-lg border border-green-500/20">
            <div class="text-3xl font-bold text-green-400 cute-heading" id="tokens-earned">0</div>
            <div class="text-sm text-gray-400 cute-text">Knowledge Tokens</div>
          </div>
          <div class="text-center p-6 bg-gray-700/30 rounded-lg border border-yellow-500/20">
            <div class="text-3xl font-bold text-yellow-400 cute-heading" id="overall-progress">0%</div>
            <div class="text-sm text-gray-400 cute-text">Overall Progress</div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  // Progress tracking system
  const PROGRESS_KEY = 'mchopiee_travel_progress';
  
  // Load saved progress or initialize
  function loadProgress() {
    const saved = localStorage.getItem(PROGRESS_KEY);
    if (saved) {
      try {
        return JSON.parse(saved);
      } catch (e) {
        console.error('Error loading progress:', e);
      }
    }
    
    // Default progress structure
    return {
      themes: {
        ai: { completedActivities: [], attemptedActivities: [], totalProgress: 0 },
        sports: { completedActivities: [], attemptedActivities: [], totalProgress: 0 },
        food: { completedActivities: [], attemptedActivities: [], totalProgress: 0 },
        travel: { completedActivities: [], attemptedActivities: [], totalProgress: 0 }
      },
      globalStats: {
        totalActivitiesCompleted: 0,
        totalSegmentsCompleted: 0,
        citiesVisited: 0,
        tokensEarned: 0
      }
    };
  }
  
  // Save progress to localStorage
  function saveProgress(progressData) {
    try {
      localStorage.setItem(PROGRESS_KEY, JSON.stringify(progressData));
      console.log('Progress saved:', progressData);
    } catch (e) {
      console.error('Error saving progress:', e);
    }
  }
  
  // Calculate progress percentage for a theme
  function calculateThemeProgress(themeData) {
    // Each theme has 4 cities, estimate 3-4 activities per city
    const estimatedTotalActivities = 12; // 4 cities √ó 3 activities average
    const completedActivities = themeData.completedActivities.length;
    return Math.min(100, Math.round((completedActivities / estimatedTotalActivities) * 100));
  }
  
  // Update progress indicators on the hub
  function updateProgressDisplay() {
    const progress = loadProgress();
    
    document.querySelectorAll('[data-node]').forEach(card => {
      const theme = card.dataset.node;
      const themeData = progress.themes[theme];
      const progressBar = card.querySelector('.progress-bar');
      const progressFill = card.querySelector('.progress-fill');
      const badge = card.querySelector('.status-badge');
      const progressText = card.querySelector('.text-xs.text-gray-400');
      
      // Calculate progress
      const progressPercent = calculateThemeProgress(themeData);
      const citiesVisited = Math.floor(themeData.completedActivities.length / 3); // 3 activities per city
      const totalCities = 4;
      
      // Update visual progress
      progressBar.style.width = progressPercent + '%';
      progressFill.style.width = progressPercent + '%';
      
      // Update progress text with activities info
      const completedActivities = themeData.completedActivities.length;
      progressText.innerHTML = `Progress: ${citiesVisited}/${totalCities} Cities<br><small>${completedActivities} activities completed</small>`;
      
      // Update badge based on progress
      if (progressPercent === 100) {
        badge.className = 'status-badge status-completed';
        badge.textContent = '‚úÖ Complete';
      } else if (progressPercent > 0) {
        badge.className = 'status-badge status-current';
        badge.textContent = `${progressPercent}% Done`;
      } else {
        badge.className = 'status-badge status-current';
        badge.textContent = `Node ${getNodeNumber(theme)}`;
      }
      
      // Add visual indicator for started themes
      if (completedActivities > 0) {
        card.classList.add('started');
        card.style.borderColor = 'rgba(139, 92, 246, 0.6)';
      }
    });
    
    // Update global stats if elements exist
    const citiesElement = document.getElementById('cities-visited');
    const tokensElement = document.getElementById('tokens-earned');
    const progressElement = document.getElementById('overall-progress');
    
    if (citiesElement) citiesElement.textContent = progress.globalStats.citiesVisited;
    if (tokensElement) tokensElement.textContent = progress.globalStats.tokensEarned;
    
    if (progressElement) {
      const overallProgress = Math.round(
        (calculateThemeProgress(progress.themes.ai) + 
         calculateThemeProgress(progress.themes.sports) + 
         calculateThemeProgress(progress.themes.food) + 
         calculateThemeProgress(progress.themes.travel)) / 4
      );
      progressElement.textContent = overallProgress + '%';
    }
  }
  
  function getNodeNumber(theme) {
    const nodeMap = { ai: 1, sports: 2, food: 3, travel: 4 };
    return nodeMap[theme] || 1;
  }
  
  // Make progress functions globally available
  window.McHopieeProgress = {
    loadProgress: loadProgress,
    saveProgress: saveProgress,
    updateProgressDisplay: updateProgressDisplay
  };
  
  // Start theme function (updated to use Jekyll baseurl)
  window.startTheme = function(themeName) {
    console.log('Starting theme:', themeName);
    window.location.href = '{{ site.baseurl }}/node/' + themeName;
  };
  
  // Add card hover effects
  document.querySelectorAll('.card-3d').forEach(card => {
    card.addEventListener('mouseenter', function() {
      this.style.transform = 'translateY(-10px) rotateX(5deg) rotateY(5deg)';
    });
    
    card.addEventListener('mouseleave', function() {
      this.style.transform = 'translateY(0) rotateX(0deg) rotateY(0deg)';
    });
  });

  // Initialize progress display
  updateProgressDisplay();
});
</script>
